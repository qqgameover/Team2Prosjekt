<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet"
		href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

	<link rel="stylesheet" href="CSS/global.css">
	<link rel="stylesheet" href="CSS/meldinger.css">
	<link rel="stylesheet" href="CSS/kategorier.css">
	<link rel="stylesheet" href="CSS/mainstyle.css">
	<link rel="stylesheet" href="CSS/leaderboard.css">

	<title>Wishing Others Well</title>


	<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
	<script src="model.js"></script>

	<script src="VIEW/meldingView.js"></script>
	<script src="VIEW/mainView.js"></script>
	<script src="VIEW/leaderboardView.js"></script>
	<script src="VIEW/kategorierViews.js"></script>

	<script src="CONTROLLER/videoController.js"></script>
	<script src="CONTROLLER/meldingController.js"></script>
	<script src="CONTROLLER/poengController.js"></script>


</head>

<body>

	<div id="app"></div>

	<script>

		//1. teste ut lese csv-data fra google regneark - og lagre data i modellen
		//2. teste ut å sende data til et google form ved hjelp av javascript  ("Kasper") /DONE!
		//3. teste ut google authentication - at brukeren får logget inn med google brukeren sin på deres side ("Jostein")
		//4. gjøre footer til header /DONE!
		//5. tomme/fulle bokser på forsiden  /DONE!
		//6. overskrift + ? på forsiden /DONE!
		//7. fikse youtube embed - ikke full screen eller klikke til youtube ("Kenneth")
		//	 gud er død og vi har drept han. 
		//8. Trykk på en knapp for å se alle du kan sende melding til. (Alle i klassen, Liste). 
		//9. Overskrift på mainsiden. "Grønt er skjønt". 3 poeng pr kategori på en dag. 3 Tomme slots fra start. /Done
		// :D :D :D :D :D :D
		//fikset cvs lesning, og fikset søkefeltet. /DONE!
		//fikse OAUTH gud hjelp oss
		//fikse ulike intanser med oauth og gapi, samt med google forms(Jeg aner ikke hvordan vi skal bruke fetch med google tokens, men den tid den sorg.)




		pointsCounterMessages();
		pointsCounterMental();
		pointsCounterFysisk();
		pointsCounterLag();
		updateView();

		function updateView(pageId) {
			if (model.app.currentPage == 'meldinger') {
				html = updateViewMeldinger();
			}   //Kasper   
			if (model.app.currentPage == 'kategorier') {
				html = updateViewKategorier();
			} 	//Jostein
			if (model.app.currentPage == 'main') {
				html = updateViewMain();
			}	//Kenneth
			if (model.app.currentPage == 'leaderboard') {
				html = updateViewLeaderboard();
			}   //Mailinn
			document.getElementById("app").innerHTML = html;

		};
		//Globale controllere
		//Controller for å komme til hjem siden

		function lastPage(id) {
			if (model.app.currentPage = "main") { model.app.previousPage.push("gotoH()"); }
			else if (model.app.currentPage = "leaderboard") { model.app.previousPage.push("gotoLederbrett()"); }
			else if (model.app.currentPage = "meldinger") { model.app.previousPage.push("gotoMeldinger()"); }
			else if (model.app.currentPage = "kategorier") { pagemanager(id); }
		}

		function gotoH() {
			model.app.previousPage = [];
			model.app.currentPage = 'main';
			updateView();
		}

		function gotoKategorier(id) {
			model.app.currentPage = "kategorier";
			pagemanager(id);
		}

		function gotoLederbrett() {
			lastPage(567);
			model.app.currentPage = "leaderboard";
			updateView();
		}

		function gotoMeldinger() {
			lastPage();
			model.app.currentPage = "meldinger";
			updateView();
		}

		//Ikke ferdig - Let it be
		//Jostein bruker den store tenkemuskelen

		function goBack() {
			console.log(model.app.previousPage)
			if (model.app.previousPage.length != 0) {
				let destinationPage = model.app.previousPage.pop();
				eval(destinationPage);
			}
			else console.log("utafor if")
		}
	</script>

</body>

</html>